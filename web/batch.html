<!DOCTYPE html>
<html>
  <head>
    <title>batchd web client</title>

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- jQuery rest -->
    <script src="http://jpillora.com/jquery.rest/dist/1/jquery.rest.min.js"></script>
    <!-- WARNING: I advise not using this link, instead download and host this library on your own server as GitHub has download limits -->

  </head>
  <body>
    <h1>batchd web client</title>

    <div class="content">
      <label for="queuelist">Queue:</label>
      <select id="queuelist">
      </select>
      <input type='button' onclick='getJobs()' value='List jobs'/>
      <ol id='jobslist'>
      </ol>
    </div>

    <script>
    var client = new $.RestClient('http://localhost:9681/', {
      username: 'root',
      password: '123456'
    });
    //alert('hello');
    
    client.add('queue');

    client.queue.read().done(function(data) {
      $.each(data, function(k,v) {
        $('#queuelist').append(
            $('<option>').val(v.name).text(v.name)
          );
      });
    });

function getJobs() {
  var qname = $('#queuelist').val();
  client.queue.read(qname, {'status': 'all'}).done(function(data) {
    $.each(data, function(k,v) {
      $('#jobslist').append(
          $('<li>').text(v.type + ": " + v.status)
        );
    });
  });
};
      
    </script>
  </body>
</html>
